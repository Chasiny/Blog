# 红黑树

红黑树是一种平衡二叉查找树，拥有良好的最坏运行时间，它可以在O(logn)时间内做查找，插入和删除。  
![红黑树](../../../image/algorithm/data-structure/redblack-tree/Red-black_tree_01.png)

## 性质
1. 每个节点是红色或者黑色
2. 根节点是黑色
3. 所有的叶子节点（NIL）是黑色
4. 如果一个节点是红色的，则它的两个子节点都是黑色的
5. 从任一节点到每个叶子节点的所有简单路径都包含相同的黑色节点

> 性质4跟性质五保证了红黑树最长路径不会多于最短路径的两倍长

## 查找
由于红黑树本身也是二叉查找树，因此查找红黑树跟查找二叉查找树的操作是一样的

## 插入
红黑树的插入第一部分跟二叉查找树的插入是一样的（插入节点着色为红色），但是插入的过程会破坏红黑树如下的性质：  

* 性质2：根节点是黑色
* 性质4：如果一个节点是红色的，则它的两个子节点都是黑色的
* 性质5：从任一节点到每个叶子节点的所有简单路径都包含相同的黑色节点

插入一个红色节点后最容易破坏的性质4，也就是说当前节点跟父节点均为空色，这个时候需要对红黑树进行调整，那么如何调整红黑树导致不会破坏以上的性质呢，这就我们接下来要讨论事情。

1. 对于性质2，我们只需要在每次调整后将根节点着色为黑色即可
2. 对于性质4，我们可以通过后面讲述的几种情况对红黑树做不同调整方案
3. 对于性质5，由于我们插入的节点默认着色为红色，所以当按照二叉查找树的插入方法插入该节点到红黑树后，并不会破坏性质5，因此我们只需要在调整的时候不破坏性质五即可

  
下面我们将要调整的节点称为z
### 调整情况
1. **z的叔节点（父亲的兄弟）y是红色的**

解决方案：将父亲节点跟叔叔节点着色为黑色，将爷爷节点着色为红色，对z的爷爷节点判断是否需要再次调整


2. **（父节点是爷爷节点的左子）z的叔节点y是黑色的且z是一个右孩子**

解决方案：对父节点进行左旋操作，然后变成情况3

3. **（父节点是爷爷节点的左子）z的叔节点y是黑色的且z是一个左孩子**

解决方案：将父节点着色为黑色，将爷爷节点着色为红色，对爷爷节点进行右旋操作



---
参考
* [维基百科-红黑树](https://zh.wikipedia.org/zh-hans/%E7%BA%A2%E9%BB%91%E6%A0%91)
* 算法导论